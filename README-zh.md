# 思源图片编辑器 (SiYuan Image Studio) 使用文档

## 📖 简介

思源图片编辑器是一款为思源笔记设计的轻量级图片编辑插件，让你可以直接在笔记中对图片进行标注、涂鸦、裁剪等操作，无需借助外部工具。

## ✨ 主要功能

### 🎨 绘图工具

- ​**画笔**：自由手绘涂鸦
- ​**直线**：绘制直线
- ​**箭头**：添加箭头指示
- ​**矩形**：绘制矩形框
- ​**椭圆/圆形**：绘制椭圆或圆形
- ​**马赛克**：对敏感区域打码

### 📝 标注工具

- ​**文字**：添加文字说明
- ​**序号标记**：添加带序号的圆形标记（❶❷❸...）
- ​**表情印章**：添加常用表情符号

### ✂️ 图片操作

- ​**裁剪**：自由裁剪图片区域
- ​**翻转**：水平/垂直翻转图片
- ​**插入图片**：在当前图片上叠加其他图片

### 🛠️ 辅助功能

- ​**撤销/恢复**：支持多步操作的撤销和恢复
- ​**缩放/拖拽**：自由缩放和拖拽画布查看细节
- ​**颜色选择**：自定义画笔和标注颜色
- ​**多格式保存**：支持 PNG、JPG、WebP 格式
- ​**图片压缩**：可选开启压缩以减小文件体积
- ​**复制到剪贴板**：快速复制编辑结果

## 🚀 快速开始

### 安装插件

1. 打开思源笔记
2. 进入 `设置`​ → `集市`​ → `插件`
3. 搜索 "思源图片编辑器" 或 "SiYuan Image Studio"
4. 点击 `下载` 并启用插件

### 打开编辑器

有两种方式打开图片编辑器：

**方式一：右键菜单**

1. 在笔记中右键点击任意图片
2. 在弹出菜单中选择 `编辑`

**方式二：快捷键**

1. 选中笔记中的图片（点击图片使其高亮）
2. 按下快捷键 `Ctrl+Shift+E`​（Mac: `⌘⇧E`）

> 💡 ​**提示**：快捷键可在插件设置中自定义

## 🎯 功能详解

### 基础操作

#### 选择工具 (V)

- 点击对象可选中并移动
- 按住 `Ctrl`​/`⌘` 可多选对象
- 拖拽对象边角可调整大小
- 按 `Delete` 或点击删除按钮可删除选中对象

#### 抓手拖拽 (Space)

- 按住 `空格键` 可临时切换到拖拽模式
- 松开空格键恢复之前的工具
- 适合查看大图片的不同区域

#### 缩放画布

- ​`+` 按钮：放大画布
- ​`-` 按钮：缩小画布
- ​`1:1` 按钮：重置为 100% 显示
- 鼠标滚轮：滚动缩放（对准鼠标位置缩放）

### 绘图工具

#### 画笔 (P)

1. 点击画笔工具或按 `P` 键
2. 在画布上拖动鼠标自由绘制
3. 可在颜色选择器中更改画笔颜色

#### 直线 (L)

1. 点击直线工具或按 `L` 键
2. 点击起点，拖动到终点后松开鼠标
3. 按住 `Shift` 可绘制水平/垂直直线

#### 箭头 (A)

1. 点击箭头工具或按 `A` 键
2. 操作方式同直线
3. 自动在终点添加箭头指向

#### 矩形 (R)

1. 点击矩形工具或按 `R` 键
2. 拖动鼠标绘制矩形
3. 按住 `Shift` 可绘制正方形

#### 椭圆/圆形 (C)

1. 点击椭圆工具或按 `C` 键
2. 拖动鼠标绘制椭圆
3. 按住 `Shift` 可绘制正圆

#### 马赛克 (M)

1. 点击马赛克工具或按 `M` 键
2. 框选需要打码的区域
3. 松开鼠标自动生成像素化马赛克效果

> ⚠️ ​**注意**：马赛克是不可逆的操作，保存后无法恢复原图

### 标注工具

#### 文字 (T)

1. 点击文字工具或按 `T` 键
2. 在画布上点击添加文字
3. 默认显示 "双击编辑"，双击可修改内容
4. 选中文字后可更改颜色

#### 序号标记 (K)

1. 点击序号工具或按 `K` 键
2. 在画布上点击添加序号（从 1 开始自动递增）
3. 点击 `1↺` 按钮可重置序号计数
4. 可选中标记后拖动位置

#### 表情印章 (😊)

1. 点击表情工具
2. 在弹出的表情面板中选择表情
3. 在画布上点击添加表情
4. 可选中后调整大小和位置

### 图片操作

#### 裁剪图片 (✂️)

1. 点击裁剪工具
2. 调整裁剪框的位置和大小
3. 框内会实时显示裁剪区域尺寸（如 800 × 600）
4. 点击 `⎷ 确认裁剪` 完成裁剪
5. 点击 `☓` 取消裁剪

> 💡 ​**提示**：裁剪后会自动调整画布大小以适应新图片

#### 翻转图片

- **水平翻转** (↔️)：左右镜像翻转
- **垂直翻转** (↕️)：上下镜像翻转

#### 插入图片 (🖼️)

1. 点击插入图片工具
2. 选择要叠加的图片文件
3. 图片会出现在画布中央
4. 可拖动、缩放调整位置和大小

### 保存与导出

#### 快速保存

- 点击 `💾 保存` 按钮保存为原格式
- 保存后会自动更新笔记中的图片

#### 选择格式保存

1. 点击保存按钮右侧的 `▼` 下拉箭头
2. 选择目标格式：

    - ​**PNG**：支持透明背景，质量最高
    - ​**JPG**：体积小，适合照片
    - ​**WebP**：现代格式，兼顾质量和体积

#### 图片压缩

- 勾选工具栏右侧的 `压缩` 选项可启用压缩
- 压缩后的图片体积更小，但视觉质量几乎无损
- 适合需要减小文档体积的场景

#### 复制到剪贴板 (📋)

- 点击复制按钮可将编辑结果复制到剪贴板
- 可直接粘贴到其他应用程序

## ⌨️ 快捷键参考

|功能|Windows/Linux|Mac|
| ------------| ---------------| --------------|
|打开编辑器|​`Ctrl+Shift+E`|​`⌘⇧E`|
|撤销|​`Ctrl+Z`|​`⌘Z`|
|恢复|​`Ctrl+Y`|​`⌘Y`|
|选择工具|​`V`|​`V`|
|抓手拖拽|​`Space`（按住）|​`Space`（按住）|
|画笔|​`P`|​`P`|
|直线|​`L`|​`L`|
|箭头|​`A`|​`A`|
|矩形|​`R`|​`R`|
|椭圆|​`C`|​`C`|
|马赛克|​`M`|​`M`|
|文字|​`T`|​`T`|
|序号标记|​`K`|​`K`|
|删除选中|​`Delete/Backspace`|​`Delete/⌫`|
|取消操作|​`Esc`|​`Esc`|

## ⚙️ 插件设置

在思源笔记 `设置`​ → `插件`​ → `思源图片编辑器` 中可配置：

### 快捷键

- 自定义打开编辑器的快捷键
- 默认为 `Ctrl+Shift+E`

### 备份

- 启用后，编辑前会将原图备份到 `/temp/assets_backup/` 目录
- 建议重要图片开启此选项

### 图片压缩

- 默认开启，保存时自动压缩图片
- 可在编辑器工具栏中临时切换

### VIP 功能

- 免费用户每天有 **3 次** 保存额度
- 升级 VIP 可解锁：

  - ✅ 无限使用次数
  - ✅ 高级 AI 修图功能（即将推出）
  - ✅ 批量处理图片（即将推出）

#### 如何升级 VIP

1. 点击设置中的 `立即购买` 按钮
2. 使用微信或支付宝扫码打赏
3. 通过以下方式联系作者获取授权码：

    - 链滴社区私信：[@wilsons](https://ld246.com/chats/wilsons)
    - QQ 邮箱留言 [点这里发送](https://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=MkVbQVoHAwMHclRdSl9TW14cUV1f)
    - 加入 QQ 群：283157619 后联系群主
4. 将授权码填入设置中的 `VIP 密钥` 输入框
5. 点击 `验证密钥` 完成激活

> ⏰ 作者通常会在 24 小时内回复并发放授权码

## 💡 使用技巧

### 精确绘制

- 绘制矩形/椭圆时按住 `Shift` 可得到正方形/正圆
- 绘制直线/箭头时按住 `Shift` 可限制为水平/垂直方向

### 颜色切换

- 选中已绘制的对象后，点击颜色选择器可批量更改颜色
- 支持多选对象后统一更改颜色

### 多选对象

- 按住 `Ctrl`​/`⌘` 点击可选中多个对象
- 多选后可同时移动或删除

### 查看细节

- 使用鼠标滚轮可快速缩放画布
- 按住 `空格键` 拖动画布查看不同区域
- 点击 `1:1` 按钮可快速恢复原始大小

### 粘贴图片

- 在编辑器中按 `Ctrl+V`​/`⌘V` 可直接粘贴剪贴板中的图片
- 也可直接拖拽图片文件到编辑器窗口

## ❓ 常见问题

**Q: 为什么我的图片右键菜单没有"编辑"选项？**   
A: 只有存储在笔记本 `assets` 目录下的图片才支持编辑，外链图片不支持。

**Q: 编辑后保存失败怎么办？**   
A: 请检查是否超出免费额度（每天 3 次），可升级 VIP 解锁无限次数。

**Q: 如何恢复编辑前的图片？**   
A: 如果在设置中启用了"备份"功能，原图会保存在 `/temp/assets_backup/`
